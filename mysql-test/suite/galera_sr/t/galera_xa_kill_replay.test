#
# Test the scenario where a server crashes while a
# transaction is replaying.
#

--source include/galera_cluster.inc
--source include/have_debug_sync.inc

# Save original auto_increment_offset values.
--let $node_1=node_1
--let $node_2=node_2
--source ../galera/include/auto_increment_offset_save.inc


#
# Test A: Crash the server *before* the rollback step during replay
#
--let $sync_point_name = crash_xa_replay_before_rollback
--source galera_xa_kill_replay.inc


#
# Test B: Crash the server *after* the rollback step during replay
#
--let $sync_point_name = crash_xa_replay_after_rollback
--source galera_xa_kill_replay.inc

# Restore original auto_increment_offset values.
--source ../galera/include/auto_increment_offset_restore.inc
